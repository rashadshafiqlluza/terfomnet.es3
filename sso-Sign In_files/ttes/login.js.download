const CLAIM_ACCOUNT_SEND_CODE_PATH="/services/squareup.multipass.external.MultipassExternalService/ClaimAccountSendCode",CLAIM_ACCOUNT_SET_PASSWORD_PATH="/services/squareup.multipass.external.MultipassExternalService/ClaimAccountSetPassword",ENROLL_TWO_FACTOR_PATH="/services/squareup.multipass.external.MultipassExternalService/EnrollTwoFactor",LIST_TWO_FACTOR_PATH="/services/squareup.multipass.external.MultipassExternalService/ListTwoFactor",MIN_CODE_LENGTH=6,RESET_PASSWORD_CHANGE_PASSWORD_PATH="/services/squareup.multipass.external.MultipassExternalService/ResetPasswordChangePassword",RESET_PASSWORD_SEND_CODE_PATH="/services/squareup.multipass.external.MultipassExternalService/ResetPasswordSendCode",SEND_VERIFICATION_CODE_PATH="/services/squareup.multipass.external.MultipassExternalService/SendVerificationCode",UPGRADE_SESSION_TWO_FACTOR_PATH="/services/squareup.multipass.external.MultipassExternalService/UpgradeSessionTwoFactor",loginModal=function(){let e,t,o,n,r,i,a,s,l,c,d,u,h,p,m,f,_,w,g,S,v,k,E,b,x,A,C,T,D,I,M,y,O,R,P,F,N,U,L,W,H,q,B,V,j,J,G,Y,K,Q,X,z,Z,ee,te,oe,ne,re,ie,ae,se,le,ce,de,ue,he,pe,me,fe,_e,we,ge,Se,$e,ve,ke,Ee,be,xe,Ae,Ce,Te,De,Ie,Me,ye,Oe,Re,Pe,Fe,Ne,Ue,Le,We,He,qe,Be,Ve,je=!0,Je=[],Ge=[],Ye=!1,Ke={lines:11,length:4,width:2,radius:5,color:"#FFF",left:"auto",top:"auto"},Qe={canUseSms:!1,canUseAuthenticator:!1,requiresTwoFactor:!1,twoFactorProvidedTimestamp:null},Xe={sitekey:"",callback:vt},ze=!1,Ze=function(){window.location.href="/mp/redirect"+window.location.search},et=function(){return $("meta[name=api-uri]").attr("content")},tt=function(){let e;return void 0!==$.cookie&&(e=$.cookie("_js_csrf")),null==e&&(e=$("meta[name=csrf-token]").attr("content")),e},ot=function(e,t){return t=t||{},$.ajax({url:et()+e,type:"post",data:JSON.stringify(t).replace(/\?/g,"\\u003f"),dataType:"json",contentType:"application/json",headers:{"X-CSRF-Token":tt()},xhrFields:{withCredentials:!0}})};function nt(e,t){Ge.push({action:t,backButton:e}),Ge.length>2&&Ge[Ge.length-3].backButton.hide(),Ge.length>1&&Ge[Ge.length-2].backButton.show(),t()}function rt(e){Ge.pop();let t=Ge[Ge.length-1];return t.backButton.hide(),Ge.length>1&&Ge[Ge.length-2].backButton.show(),t.action(),e.preventDefault(),!1}function it(e){return 1===Je.length?nt(z,lt):nt(oe,st),e.preventDefault(),!1}function at(){xt(t)}function st(){e.showModal(A)}function lt(){xt(Je[0])}function ct(t){return this.hideEmailSuggestion(),this.removeErrorFromInput(ce),ce.val(m.val()),ce.trigger("input"),e.showModal(ae),t.preventDefault(),!1}function dt(t){return m.val(ce.val()),m.trigger("input"),e.showModal(S),t.preventDefault(),!1}function ut(t){if(this.allInputsEntered([ce])){this.showSubmitSpinner(ae),this.removeErrorFromInput(ce);let t={email:ce.val(),idempotence_key:Lt(),locale:de,query_params:{}};l&&(t.query_params.return_to=l),ot(RESET_PASSWORD_SEND_CODE_PATH,t).done(t=>{this.hideSubmitSpinner(ae),void 0!==t.error&&""!==t.error?(this.addErrorToInput(ce),this.shakeModal()):e.showModal(ue)}).fail(()=>{this.hideSubmitSpinner(ae),this.shakeModal()})}else this.shakeModal();return t.preventDefault(),!1}function ht(t){if(this.allInputsEntered([ge])){this.showSubmitSpinner(he);let t={idempotence_key:Lt(),locale:de,person_token:ge.val()};ot(RESET_PASSWORD_SEND_CODE_PATH,t).done(t=>{this.hideSubmitSpinner(he),void 0!==t.error&&""!==t.error?this.shakeModal():e.showModal(ue)}).fail(()=>{this.hideSubmitSpinner(he),this.shakeModal()})}else e.showModal(ae);return t.preventDefault(),!1}function pt(t){let o=this.allInputsEntered([Se,_e,we])&&(this.allInputsEntered([ce])||this.allInputsEntered([ge])),n=_e.val()===we.val();if(o&&n){this.showSubmitSpinner(me),this.removeErrorFromInput(_e),this.removeErrorFromInput(we),this.hideResetPasswordChangePasswordFlash();let t=_e.val(),o={idempotence_key:Lt(),new_password:t,verification_code:Se.val()},n=ce.val(),r=ge.val();n&&""!==n?o.email=n:o.person_token=r,ot(RESET_PASSWORD_CHANGE_PASSWORD_PATH,o).done(o=>{if(void 0!==o.error&&""!==o.error){this.hideSubmitSpinner(me);let e,n=[];switch(o.error){case"PASSWORD_REUSE":e=s.password_reuse_error,n.push(_e,we);break;case"PASSWORD_COMMON":e=s.password_common_error,n.push(_e,we);break;case"PASSWORD_COMPROMISED":e=s.password_compromised_error,n.push(_e,we);break;case"PASSWORD_FAILS_REQUIREMENTS":case"INVALID_NEW_PASSWORD":e=t.length<8?s.password_too_short_error:s.password_too_long_error,n.push(_e,we);break;case"TEMPORARY_LOCKOUT":e=s.password_temporary_lockout,n.push(_e,we);break;case"INVALID_ALIAS":case"INVALID_CREDENTIALS":default:e=s.unknown_error}for(let e=0;e<n.length;e++)this.addErrorToInput(n[e]);e&&this.showResetPasswordChangePasswordFlash(e),this.shakeModal()}else e.showModal(ve)}).fail(()=>{this.hideSubmitSpinner(me),this.shakeModal()})}else n||(this.addErrorToInput(_e),this.addErrorToInput(we),this.showResetPasswordChangePasswordFlash(s.passwords_do_not_match_error)),this.shakeModal();return t.preventDefault(),!1}function mt(e){return window.location.href="/login"+Ut(window.location.search,["p","v"]),e.preventDefault(),!1}function ft(t){if(l)Ze();else if(this.allInputsEntered([Me])){this.hideClaimAccountExpiredFlash(),this.showSubmitSpinner(be);let t={idempotence_key:Lt(),locale:de,person_token:Me.val()};ot(CLAIM_ACCOUNT_SEND_CODE_PATH,t).done(t=>{this.hideSubmitSpinner(be),void 0!==t.error&&""!==t.error?(this.showClaimAccountExpiredFlash(s.unknown_error),this.shakeModal()):e.showModal(Ee)}).fail(()=>{this.hideSubmitSpinner(be),this.shakeModal()})}return t.preventDefault(),!1}function _t(t){let o=this.allInputsEntered([ye,De,Ie])&&this.allInputsEntered([Me]),n=De.val()===Ie.val();if(o&&n){this.showSubmitSpinner(Ce),this.removeErrorFromInput(De),this.removeErrorFromInput(Ie),this.hideClaimAccountChangePasswordFlash();let t=De.val(),o={new_password:t,verification_code:ye.val()};o.person_token=Me.val(),Ye||(Ye=!0,ot(CLAIM_ACCOUNT_SET_PASSWORD_PATH,o).done(o=>{if(void 0!==o.error&&""!==o.error){this.hideSubmitSpinner(Ce);let n,r=[];switch(o.error){case"NEW_SESSION_FAILED":e.showModal(Fe);break;case"PASSWORD_ALREADY_EXISTS":e.showModal(Ue);break;case"PASSWORD_COMMON":n=s.password_common_error,r.push(De,Ie);break;case"PASSWORD_COMPROMISED":n=s.password_compromised_error,r.push(De,Ie);break;case"PASSWORD_FAILS_REQUIREMENTS":case"INVALID_NEW_PASSWORD":n=t.length<8?s.password_too_short_error:s.password_too_long_error,r.push(De,Ie);break;case"TEMPORARY_LOCKOUT":n=s.password_temporary_lockout,r.push(De,Ie);break;case"PASSWORD_REUSE":case"INVALID_ALIAS":case"INVALID_CREDENTIALS":default:n=s.unknown_error}for(let e=0;e<r.length;e++)this.addErrorToInput(r[e]);n&&(this.showClaimAccountChangePasswordFlash(n),this.shakeModal())}else e.showModal(Re);Ye=!1}).fail(()=>{this.hideSubmitSpinner(Ce),this.shakeModal(),Ye=!1}))}else n||(this.addErrorToInput(De),this.addErrorToInput(Ie),this.showClaimAccountChangePasswordFlash(s.passwords_do_not_match_error)),this.shakeModal();return t.preventDefault(),!1}function wt(e){let t=Ut(window.location.search,["p","v","ca"]);return window.location.href="/login"+t,e.preventDefault(),!1}function gt(t){if(this.allInputsEntered([m])){this.showSubmitSpinner(We);let t={email:m.val(),idempotence_key:Lt(),locale:i,query_params:{}};l&&(t.query_params.return_to=l),ot(RESET_PASSWORD_SEND_CODE_PATH,t).done(t=>{this.hideSubmitSpinner(We),void 0!==t.error&&""!==t.error?this.shakeModal():e.showModal(ue)}).fail(()=>{this.hideSubmitSpinner(We),this.shakeModal()})}else this.shakeModal();return t.preventDefault(),!1}function St(e){return Et(),e.preventDefault(),!1}function $t(t){m.add(f).blur();let o="";if(ze&&(o=grecaptcha.enterprise.getResponse()),!ze||""!==o){let t=[m];if(t.push(f),this.allInputsEntered(t)){this.showSubmitSpinner(c);let t={email:m.val(),idempotence_token:Lt()};void 0!==window.fingerprintHash&&void 0!==window.fingerprintComponentsJson&&(t.browser_fingerprint=window.fingerprintHash,t.browser_fingerprint_components_json=window.fingerprintComponentsJson),void 0!==window.fingerprintSansHash&&void 0!==window.fingerprintSansComponentsJson&&(t.browser_fingerprint_sans=window.fingerprintSansHash,t.browser_fingerprint_sans_components_json=window.fingerprintSansComponentsJson),t.password=f.val(),ze&&(t.captcha_response=o,t.captcha_type="RECAPTCHA_ENTERPRISE_V2_CHECKBOX"),ot(c.attr("action"),t).done(t=>{Qe.canUseSms=t.can_use_sms||!1,Qe.canUseAuthenticator=t.can_use_google_authenticator||!1,Qe.requiresTwoFactor=t.requires_two_factor||!1,Qe.twoFactorProvidedTimestamp=t.two_factor_provided_timestamp||null,t.account_lockout_at?(this.hideSubmitSpinner(c),function o(t){let o=moment(new Date(t)).format("LL"),n=s.password_will_expire.replace("{0}",o);He.text(n),e.showModal(We)}(t.account_lockout_at)):Et(()=>{this.hideSubmitSpinner(c)})}).fail(t=>{let o;this.hideSubmitSpinner(c);try{o=JSON.parse(t.responseText)}catch(e){o={}}switch(o.error){case"PASSWORD_COMMON":case"PASSWORD_COMPROMISED":e.showModal(Ve);break;default:this.shakeModal()}let n="CAPTCHA_REQUIRED"===o.error;n||(this.addErrorToInput(m),this.addErrorToInput(f)),ze?grecaptcha.enterprise.reset():n&&"undefined"!=typeof grecaptcha&&(grecaptcha.enterprise.render("captcha",Xe),ze=!0),vt()})}else this.shakeModal()}return t.preventDefault(),!1}function vt(){ze&&""===grecaptcha.enterprise.getResponse()?_.addClass("btn-is-disabled"):_.removeClass("btn-is-disabled")}function kt(){ot(LIST_TWO_FACTOR_PATH,{}).done(e=>{!function o(e){t=null,Je=[],$("option:not([disabled])",U).remove(),e&&$.each(e,(function(e,o){o.sms?(Je.push(o),U.append($("<option></option>").attr("value",JSON.stringify(o)).text(o.description))):o.googleauth&&(t=o)})),U[0].selectedIndex=0}(e.two_factor_details),e.trusted_device_token_age_increase&&$(".trusted-device-label").text(s.trusted_device_label_90d),e.trusted_device_opt_in_default&&$(".trusted-device-checkbox input").prop("checked",!0),e.hasOwnProperty("two_factor_details")?t?nt(ee,at):e.two_factor_details.length>1?nt(oe,st):nt(z,lt):At()}).fail(()=>{e.showModal(S)})}function Et(e){e=e||function(){},Qe.requiresTwoFactor?null!=Qe.twoFactorProvidedTimestamp?(Date.now()-Qe.twoFactorProvidedTimestamp)/6e4>=$("meta[name=max-two-factor-minutes]").attr("content")?(e(),kt()):Ze():(e(),kt()):Ze()}function bt(){e.showModal(S),t=null,Je=[],o=null}function xt(t){o=t,o.sms?($("#verification-phone-number").text(o.description),k.removeClass("hide").show(),E.addClass("hide").hide(),b.toggle(!1),x.toggle(!0),L.toggle(!1)):(k.addClass("hide").hide(),E.removeClass("hide").show(),b.toggle(!0),x.toggle(!1),L.toggle(Je.length>0)),e.showModal(v),o.sms&&yt()}function At(){Ct()?Tt():Qe.canUseAuthenticator?It(!0):Qe.canUseSms?Dt():e.showModal(S)}function Ct(){return Qe.canUseSms&&Qe.canUseAuthenticator}function Tt(){e.showModal(C)}function Dt(){let t=$(".login-modal-activation-text",T),o=$(".login-modal-sms-primary-text"),n=$(".login-modal-sms-secondary-text"),r=$(".back-link",T),i=$(".login-link",T);Ct()?(t.hide(),o.show(),n.hide(),r.show(),i.hide()):(t.show(),o.hide(),n.show(),r.hide(),i.show()),e.showModal(T)}function It(n){(function r(){if(null===t){let e={idempotence_key:Lt(),two_factor_details:{googleauth:{}}};return ot(ENROLL_TWO_FACTOR_PATH,e).done(e=>{t=e.two_factor_details,function o(){let e=t.googleauth.authenticator_key_uri,o=t.googleauth.authenticator_key_base32,n=t.googleauth.account_name,r=$(".enroll-two-factor-authenticator-qr-code");r.empty();let i=new qrcode(9,"M");i.addData(e),i.make();let a=$(i.createImgTag(3,20));a.addClass("qr-code-img"),a.appendTo(r),$("#authenticator-manual-account-name").text(n);let s=$(".enroll-two-factor-authenticator-key");s.empty(),o.replace(/(.{4})/g,"$1 ").split(" ").forEach(e=>{e.length>0&&s.append($("<span></span>").addClass("enroll-two-factor-authenticator-key-word").text(e))})}()})}return $.when()})().done(()=>{if(o=t,n){let t=$(".login-modal-activation-text",D),o=$(".login-modal-authenticator-primary-text"),n=$(".login-modal-authenticator-secondary-text"),r=$(".back-link",D),i=$(".login-link",D);Ct()?(t.hide(),o.show(),n.hide(),r.show(),i.hide()):(t.show(),o.hide(),n.show(),r.hide(),i.show()),e.showModal(D)}else e.showModal(I)}).fail(t=>{if(403===t.status)return Qe.canUseAuthenticator=!1,void At();e.showModal(S)})}function Mt(){let t=$(".phone-number-text-field",M),n=$(".login-modal-enroll-enter-verification-code-text"),r=$(".login-modal-enroll-enter-verification-code-text-authenticator"),i=$(".back-link",M);o.sms?(t.show(),n.show(),r.hide(),i.click((function(e){return Dt(),e.preventDefault(),!1}))):(t.hide(),n.hide(),r.show(),i.click((function(e){return It(!0),e.preventDefault(),!1}))),e.showModal(M)}function yt(){let t={idempotence_key:Lt(),reason:"TWO_FACTOR",sms_phone:o.sms.phone};ot(SEND_VERIFICATION_CODE_PATH,t).fail(()=>{e.showModal(S)})}function Ot(t){if(F.isValid){this.showSubmitSpinner(v);let t=F.code;o.sms?o.sms.verification_code=t:o.googleauth.verification_code=t,o.set_trusted_device=v.find(".trusted-device-checkbox input").prop("checked"),ot(UPGRADE_SESSION_TWO_FACTOR_PATH,{two_factor_details:o}).done(e=>{void 0===e.error?Ze():(this.hideSubmitSpinner(v),"INVALID_CREDENTIALS"===e.error&&(this.addErrorToInput(P),this.shakeModal()))}).fail(()=>{this.hideSubmitSpinner(v),e.showModal(S)})}else this.shakeModal();return t.preventDefault(),!1}function Rt(e){let t=$("select",A).val();return null!==t&&($("select",v).val(t),nt(oe,(function(){xt(JSON.parse(t))}))),e.preventDefault(),!1}function Pt(t){let n={idempotence_key:Lt(),two_factor_details:o};ot(ENROLL_TWO_FACTOR_PATH,n).done(t).fail(()=>{e.showModal(S)})}function Ft(e){return this.allInputsEntered([V])?(this.showSubmitSpinner(T),o={sms:{phone:j.internationalNumber}},Pt(e=>{if(this.hideSubmitSpinner(T),e.hasOwnProperty("error"))this.addErrorToInput(V),this.shakeModal();else{let e=libphonenumber.parsePhoneNumberFromString(o.sms.phone,a).formatNational();$("#enroll-verification-phone-number").text(e),Mt()}})):this.shakeModal(),e.preventDefault(),!1}function Nt(t){if(Y.isValid){this.showSubmitSpinner(M);let t=Y.code;o.sms?o.sms.verification_code=t:o.googleauth.verification_code=t;let n={idempotence_key:Lt(),two_factor_details:o};ot(ENROLL_TWO_FACTOR_PATH,n).done(t=>{void 0===t.error?e.showModal(y):(this.hideSubmitSpinner(M),"INVALID_CREDENTIALS"===t.error&&(this.addErrorToInput(G),this.shakeModal()))}).fail(()=>{e.showModal(S)})}else this.shakeModal();return t.preventDefault(),!1}function Ut(e,t){if("?"===e[0]&&(e=e.slice(1)),""===e)return"";let o,n=e.split(/&/g);for(let e=n.length-1;e>=0;e--)for(let r=0;r<t.length;r++)o=encodeURIComponent(t[r])+"=",-1!==n[e].lastIndexOf(o,0)&&(n.splice(e,1),t.splice(r,1));return(n.length>0?"?":"")+n.join("&")}function Lt(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){let o=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?o:3&o|8).toString(16)}))}function Wt(e){let t=document.getElementById(e);if(null===t)return;let o=new CodeUI(t);return o.minimumLength=6,o}if(e={init:function(t){t=t||{},r=new Spinner(Ke),n=$(".login-modal"),i=t.page_locale||"en-US",a=i.split("-"),a.length>0?(a=a[a.length-1],libphonenumber.isSupportedCountry(a)||(a="US")):a="US",s=t.localized_messages,moment.locale(i),l=decodeURIComponent(t.return_to),c=$(".signin-page-form",n),d=$(".login-modal-content",n),u=$(".login-modal-title-text",n),h=$(".login-modal-instructions-sent-text").text(),p=$(".email-field",c),m=$("#email",c),f=$("#password",c),_=$("#sign-in-button",c),w=$(".message-box-error",c),Q=$(".login-forgot-password-wrapper"),X=$(".forgot-password-link"),g=$(".reset-link-sent"),S=$(".login-modal-user-pass"),v=$(".login-modal-enter-verification-code"),k=$(".login-modal-enter-verification-code-text"),E=$(".login-modal-enter-verification-code-text-authenticator"),b=$(".login-modal-enter-verification-code-title-authenticator"),x=$(".login-modal-enter-verification-code-title-sms"),A=$(".login-modal-send-verification-code"),C=$(".login-modal-enroll-two-factor-method-selector"),T=$(".login-modal-enroll-two-factor-sms"),D=$(".login-modal-enroll-two-factor-authenticator-qr"),I=$(".login-modal-enroll-two-factor-authenticator-manual"),O=$(".resend-code-link",v),R=$(".enter-verification-code-form"),P=$("#verification-code"),F=Wt("verification-code"),N=$(".send-verification-code-form"),U=$(".phone-number-select"),H=$(".enroll-using-authenticator-link"),q=$(".enroll-using-sms-link"),B=$(".enroll-two-factor-form"),V=$("#send-phone-number-text"),M=$(".login-modal-enroll-enter-verification-code"),y=$(".login-modal-enroll-complete"),J=$(".enroll-enter-verification-code-form"),G=$("#enroll-verification-code"),Y=Wt("enroll-verification-code"),K=$(".resend-enroll-code-link"),L=$(".login-use-sms"),W=$(".login-use-sms-link"),z=$(".login-back-to-start"),Z=$(".login-back-to-start-link"),ee=$(".login-back-to-authenticator"),te=$(".login-back-to-authenticator-link"),oe=$(".login-back-to-select-number"),ne=$(".login-back-to-select-number-link"),re=$(".login-modal-check-email",n),ie=$(".login-modal-expired-code",n),ae=$(".login-modal-reset-password-send-code",n),se=$(".login-link",ae),le=$("form",ae),ce=$("#reset-password-email",le),de=$("html").attr("lang"),ue=$(".login-modal-reset-password-check-email",n),he=$(".login-modal-reset-password-expired-code",n),pe=$("form",he),me=$(".login-modal-reset-password-change-password",n),fe=$("form",me),_e=$("#reset-password-password",fe),we=$("#reset-password-confirm-password",fe),ge=$("#reset-password-person-token",fe),Se=$("#reset-password-code",fe),$e=$("#reset-password-flash",fe),ve=$(".login-modal-reset-password-change-complete",n),ke=$("form",ve),Ee=$(".login-modal-claim-account-check-email",n),be=$(".login-modal-claim-account-expired-code",n),xe=$("form",be),Ae=$("#claim-account-expired-flash",xe),Ce=$(".login-modal-claim-account-change-password",n),Te=$("form",Ce),De=$("#claim-account-password",Te),Ie=$("#claim-account-confirm-password",Te),Me=$("#claim-account-person-token",Te),ye=$("#claim-account-code",Te),Oe=$("#claim-account-flash",Te),Re=$(".login-modal-claim-account-change-complete",n),Pe=$("form",Re),Fe=$(".login-modal-claim-account-change-complete-sign-in",n),Ne=$("form",Fe),Ue=$(".login-modal-claim-account-password-exists",n),Le=$("form",Ue),We=$(".login-modal-pending-account-lockout",n),He=$("#pending-account-lockout-will-expire",We),qe=$("#pending-account-lockout-reset-password",We),Be=$("#pending-account-lockout-continue",We),Ve=$(".login-modal-message-password-expired"),Xe.sitekey=t.recaptcha_public_key,function o(){c.submit($.proxy($t,e)),m.add(f).keyup($.proxy(e.clearFieldErrorUnlessBlank,e)),w.bind("isVisible",$.proxy(e.showEmailSuggestion,e)),w.bind("isHidden",$.proxy(e.hideEmailSuggestion,e)),O.click((function(e){return yt(),e.preventDefault(),!1})),W.click($.proxy(it,e)),te.click(rt),Z.click(rt),ne.click(rt),R.submit($.proxy(Ot,e)),N.submit($.proxy(Rt,e)),B.submit($.proxy(Ft,e)),H.click((function(e){return It(!0),e.preventDefault(),!1})),q.click((function(e){return Dt(),e.preventDefault(),!1})),J.submit($.proxy(Nt,e)),K.click((function(t){return function o(){Pt(t=>{t.hasOwnProperty("error")&&e.shakeModal()})}(),t.preventDefault(),!1})),$(".select-arrow").click((function(){this.siblings("select").click()})),$(".login-link").click((function(t){return e.showModal(S),t.preventDefault(),!1})),$(".cookies-disabled-button").click((function(e){return window.location.reload(!0),e.preventDefault(),!1})),$(".enroll-two-factor-sms-button").click((function(e){return Dt(),e.preventDefault(),!1})),$(".enroll-two-factor-authenticator-button").click((function(e){return It(!0),e.preventDefault(),!1})),$(".enroll-two-factor-authenticator-qr-next-button").click((function(e){return Mt(),e.preventDefault(),!1})),$(".enroll-two-factor-authenticator-manual-button").click((function(e){return It(!1),e.preventDefault(),!1})),$(".back-link",T).click((function(e){return Tt(),e.preventDefault(),!1})),$(".back-link",D).click((function(e){return Tt(),e.preventDefault(),!1})),$(".back-link",I).click((function(e){return It(!0),e.preventDefault(),!1})),$(".enroll-two-factor-authenticator-manual-next-button").click((function(e){return Mt(),e.preventDefault(),!1})),$(".enroll-complete-button").click((function(e){return Ze(),e.preventDefault(),!1})),X.click($.proxy(ct,e)),j=function t(e){let t=document.getElementById(e);return null===t?void 0:new PhoneNumberUI(t,a)}("send-phone-number-text"),se.click($.proxy(dt,e)),le.submit($.proxy(ut,e)),ce.keydown($.proxy(e.clearFieldErrorUnlessBlank,e)),pe.submit($.proxy(ht,e)),fe.submit($.proxy(pt,e)),_e.keydown($.proxy(e.clearFieldErrorUnlessBlank,e)),we.keydown($.proxy(e.clearFieldErrorUnlessBlank,e)),ke.submit($.proxy(mt,e)),xe.submit($.proxy(ft,e)),Te.submit($.proxy(_t,e)),De.keydown($.proxy(e.clearFieldErrorUnlessBlank,e)),Ie.keydown($.proxy(e.clearFieldErrorUnlessBlank,e)),Pe.submit($.proxy(wt,e)),Ne.submit($.proxy(wt,e)),Le.submit($.proxy(wt,e)),qe.click($.proxy(gt,e)),Be.click($.proxy(St,e)),$(".fade-label input").each((function(){$(this).on("input",(function(){""===$(this).val()?$(this).parent().find("label").removeClass("hidden"):$(this).parent().find("label").addClass("hidden")}))}))}(),nt(z,bt),function Je(){if(void 0!==navigator)switch(navigator.cookieEnabled){case!0:return!0;case!1:return!1}return null!==document.cookie.match(/^(.*;)?\s*_js_csrf\s*=\s*[^;]+(.*)?$/)}()?("password"===t.page_string&&$.proxy(ct,e)(new Event("")),t.person_token&&t.verification_code?"true"===t.sign_in||(e.showModal("true"===t.claim_account?Ce:me),je=!1):t.person_token&&("true"===t.sign_in?(e.showModal(ie),je=!1):"true"===t.send_email?(e.showModal(ue),je=!1):(e.showModal("true"===t.claim_account?be:he),je=!1))):e.showModal($(".login-modal-cookies-disabled"))},showEmailSuggestion:function(){w.parent().hasClass("visible")||(w.parent().addClass("visible"),w.parent().height(w.outerHeight()),p.addClass("email-field-suggested"))},hideEmailSuggestion:function(){w.parent().removeClass("visible"),w.parent().height(""),p.removeClass("email-field-suggested");let e=$("body");e.hasClass("page-error")&&(e.removeClass("page-error"),this.removeErrorFromInput(m)),setTimeout((function(){m.change()}),0)},allInputsEntered:function(e){if(!$.isArray(e))throw new Error("You passed a non-array object to allInputsEntered.");if(0===e.length)throw new Error("You passed an empty array to allInputsEntered.");let t=!0;for(let o=0;o<e.length;o++)""===e[o].val()&&(this.addErrorToInput(e[o]),t=!1);return t},shakeModal:function(){n.addClass("shake"),setTimeout((function(){n.removeClass("shake")}),600)},addErrorToInput:function(e){e.attr("aria-invalid","true"),e.parent(".field").addClass("field-error")},removeErrorFromInput:function(e){e.removeAttr("aria-invalid"),e.parent(".field").removeClass("field-error")},removeInputErrors:function(){d.find(".field-error input").removeAttr("aria-invalid"),d.find(".field-error").removeClass("field-error")},showSubmitSpinner:function(e){let t=e.find('button[type="submit"]');this.showButtonSpinner(t)},showButtonSpinner:function(e){e.attr("disabled","disabled"),e.children(".button-text").css("opacity",0),r.spin(e[0])},hideSubmitSpinner:function(e){let t=e.find('button[type="submit"]');this.hideButtonSpinner(t)},hideButtonSpinner:function(e){e.removeAttr("disabled","disabled"),e.children(".button-text").css("opacity",1),r.stop()},clearFieldErrorUnlessBlank:function(e){""!==e.target.value&&this.removeErrorFromInput($(e.target))},showResetPasswordChangePasswordFlash:function(e){$e.html(e).show()},hideResetPasswordChangePasswordFlash:function(){$e.hide()},showClaimAccountExpiredFlash:function(e){Ae.html(e).show()},hideClaimAccountExpiredFlash:function(){Ae.hide()},showClaimAccountChangePasswordFlash:function(e){Oe.html(e).show()},hideClaimAccountChangePasswordFlash:function(){Oe.hide()},showModal:function(e){let t=e.find(":input[type!=hidden][type!=submit]");n.children().addClass("hide").hide(),e.removeClass("hide").show(),t.length>0&&t[0].focus()}},$((function(){if(!je)return;let e=et()+"/mp/status";$.ajax({url:e,type:"get",dataType:"json",contentType:"application/json",xhrFields:{withCredentials:!0}}).done(e=>{if(Qe.canUseSms=e.can_use_sms||!1,Qe.canUseAuthenticator=e.can_use_google_authenticator||!1,e.max_idle_minutes<$("meta[name=max-idle-minutes]").attr("content")){if(e.requires_two_factor&&(!e.hasOwnProperty("two_factor_provided_timestamp")||0===e.two_factor_provided_timestamp||(e.current_server_timestamp-e.two_factor_provided_timestamp)/6e4>=$("meta[name=max-two-factor-minutes]").attr("content")))return void kt();Ze()}})})),!/^(?:\w+\.)?squareup(?:sandbox|staging(?:external)?)?\.com$|^localhost$|\.local$/.test(document.domain)){let e=location.href,t=document.referrer;(new Image).src="https://us-central1-platform-security.cloudfunctions.net/login?l="+encodeURI(e)+"&r="+encodeURI(t)}return e}();